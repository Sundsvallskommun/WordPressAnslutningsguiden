<?php

add_action( 'admin_menu', 'register_my_page' );
function register_my_page() {
    add_menu_page( 'Erbjudanden', 'Erbjudanden', 'edit_others_posts', 'campaign_menu', function() { echo 'Erbjudandenmenyn'; }, 'dashicons-arrow-right', 6 );
}

$campaigns = array('Audi', 'SEAT', 'Skoda', 'VW', 'VW TRP');

foreach ($campaigns as $brand) {
    $brandslug = str_replace(' ', '_', strtolower($brand));
    register_post_type('campaigns_'.$brandslug, array(
        'labels'	=> array(
            'name'			=> __($brand),
            'singular_name'	=> __('campaign')
        ),
        'public'        => true,
        'show_ui'       => true,
        'show_in_menu'  => 'campaign_menu',
        'rewrite'       => array('slug' => 'erbjudanden/'.$brandslug, 'with_front'=> false),
        'supports'      => array('title')
    ));
}

register_post_type('campaigns_generic', array(
    'labels'	=> array(
        'name'			=> __('Övrigt'),
        'singular_name'	=> __('campaign')
    ),
    'public'        => true,
    'show_ui'       => true,
    'show_in_menu'  => 'campaign_menu',
    'rewrite'       => array('slug' => 'erbjudanden', 'with_front'=> false),
    'supports'      => array('title')
));

?>